<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>P10 | Aplicación de procesamiento de notas de texto | Cliente - Servidor</title>
	<meta name="description" content="Documentation for P10 | Aplicación de procesamiento de notas de texto | Cliente - Servidor">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<script async src="assets/js/search.js" id="search-script"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">P10 | Aplicación de procesamiento de notas de texto | Cliente - Servidor</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<h1>P10 | Aplicación de procesamiento de notas de texto | Cliente - Servidor</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<p><a href="https://github.com/ULL-ESIT-INF-DSI-2021/ull-esit-inf-dsi-20-21-prct10-async-sockets-miguel-martinr/actions/workflows/node.js.yml"><img src="https://github.com/ULL-ESIT-INF-DSI-2021/ull-esit-inf-dsi-20-21-prct10-async-sockets-miguel-martinr/actions/workflows/node.js.yml/badge.svg" alt="Tests"></a>
					<a href="https://sonarcloud.io/dashboard?id=ULL-ESIT-INF-DSI-2021_ull-esit-inf-dsi-20-21-prct10-async-sockets-miguel-martinr"><img src="https://sonarcloud.io/api/project_badges/measure?project=ULL-ESIT-INF-DSI-2021_ull-esit-inf-dsi-20-21-prct10-async-sockets-miguel-martinr&metric=alert_status" alt="Quality Gate Status"></a>
				<a href="https://coveralls.io/github/ULL-ESIT-INF-DSI-2021/ull-esit-inf-dsi-20-21-prct10-async-sockets-miguel-martinr?branch=master"><img src="https://coveralls.io/repos/github/ULL-ESIT-INF-DSI-2021/ull-esit-inf-dsi-20-21-prct10-async-sockets-miguel-martinr/badge.svg?branch=master" alt="Coverage Status"></a></p>
				<a href="#ver-en-github" id="ver-en-github" style="color: inherit; text-decoration: none;">
					<h1><a href="https://github.com/ULL-ESIT-INF-DSI-2021/ull-esit-inf-dsi-20-21-prct10-async-sockets-miguel-martinr"><strong>Ver en Github</strong></a></h1>
				</a>
				<a href="#github-page" id="github-page" style="color: inherit; text-decoration: none;">
					<h1><a href="https://ull-esit-inf-dsi-2021.github.io/ull-esit-inf-dsi-20-21-prct10-async-sockets-miguel-martinr/"><strong>Github page</strong></a></h1>
				</a>
				<a href="#tabla-de-contenidos" id="tabla-de-contenidos" style="color: inherit; text-decoration: none;">
					<h2><strong>Tabla de contenidos</strong></h2>
				</a>
				<ul>
					<li><a href="./#introducci%C3%B3n"><strong>Introducción</strong></a></li>
					<li><a href="./#comunicaciones"><strong>Comunicaciones</strong></a></li>
					<li><a href="./#cliente"><strong>Cliente</strong></a><ul>
							<li><a href="./#clase-notesmanagerclient"><strong>Clase NotesManagerClient</strong></a></li>
							<li><a href="./#uso"><strong>Uso</strong></a></li>
						</ul>
					</li>
					<li><a href="./#servidor"><strong>Servidor</strong></a><ul>
							<li><a href="./#listen"><strong>Listen</strong></a></li>
							<li><a href="./#handlers-del-endpoint-del-servidor"><strong>Handlers del endpoint del servidor</strong></a></li>
							<li><a href="./#handlers-para-conexiones-con-el-cliente"><strong>Handlers para conexiones con el cliente</strong></a></li>
							<li><a href="./#enviar-respuesta-a-un-cliente"><strong>Enviar respuesta a un cliente</strong></a></li>
							<li><a href="./#procesar-una-petici%C3%B3n"><strong>Procesar una petición</strong></a></li>
							<li><a href="./#uso-1"><strong>Uso</strong></a></li>
						</ul>
					</li>
					<li><a href="./#testing"><strong>Testing</strong></a></li>
				</ul>
				<a href="#introducción" id="introducción" style="color: inherit; text-decoration: none;">
					<h2><strong>Introducción</strong></h2>
				</a>
				<p>A continuación abordaremos el desarrollo de una aplicación para la gestión de notas que funcione bajo el modelo cliente-servidor. Haremos uso de un <a href="https://ull-esit-inf-dsi-2021.github.io/ull-esit-inf-dsi-20-21-prct08-filesystem-notes-app-miguel-martinr/"><strong>Gestor de Notas</strong></a> desarrollado anteriormente y nos ocuparemos principalmente de emplear sockets asíncronos y la emisión de eventos para crear un servidor y un cliente.</p>
				<p>El cliente se encargará de parsear los comandos mediante el uso del paquete <code>yargs</code>. Y, tras enviar las peticiones al servidor, esperará la respuesta.</p>
				<a href="#ejemplo-de-funcionamiento" id="ejemplo-de-funcionamiento" style="color: inherit; text-decoration: none;">
					<h3><strong>Ejemplo de funcionamiento:</strong></h3>
				</a>
				<ul>
					<li><strong>Servidor</strong>
					<img src="media/server-demo.gif" alt="Server demo"></li>
					<li><strong>Cliente</strong>
					<img src="media/client-demo.gif" alt="Client demo"></li>
				</ul>
				<a href="#comunicaciones" id="comunicaciones" style="color: inherit; text-decoration: none;">
					<h2><strong>Comunicaciones</strong></h2>
				</a>
				<p>Para comunicar el cliente con el servidor emplearemos sockets asíncronos utilizando la clase <code>Socket</code> proporcionada por la librería <code>net</code> de Node.js.</p>
				<p>El cliente enviará una petición con la siguiente forma:</p>
				<pre><code class="language-typescript"><span style="color: #D73A49">export</span><span style="color: #24292E"> </span><span style="color: #D73A49">type</span><span style="color: #24292E"> </span><span style="color: #6F42C1">RequestType</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> {</span>
<span style="color: #24292E">  </span><span style="color: #E36209">type</span><span style="color: #D73A49">:</span><span style="color: #24292E"> </span><span style="color: #6F42C1">CommandType</span><span style="color: #24292E">; </span><span style="color: #6A737D">// Acción que se requiere llevar a cabo (add, list, read, remove, edit)</span>
<span style="color: #24292E">  </span><span style="color: #E36209">username</span><span style="color: #D73A49">:</span><span style="color: #24292E"> </span><span style="color: #005CC5">string</span><span style="color: #24292E">, </span><span style="color: #6A737D">// Usuario</span>
<span style="color: #24292E">  </span><span style="color: #E36209">title</span><span style="color: #D73A49">?:</span><span style="color: #24292E"> </span><span style="color: #005CC5">string</span><span style="color: #24292E">, </span><span style="color: #6A737D">// Título de la nota</span>
<span style="color: #24292E">  </span><span style="color: #E36209">body</span><span style="color: #D73A49">?:</span><span style="color: #24292E"> </span><span style="color: #005CC5">string</span><span style="color: #24292E">, </span><span style="color: #6A737D">// Cuerpo de la nota</span>
<span style="color: #24292E">  </span><span style="color: #E36209">color</span><span style="color: #D73A49">?:</span><span style="color: #24292E"> </span><span style="color: #6F42C1">KnownColors</span><span style="color: #24292E">, </span><span style="color: #6A737D">// Color de la nora</span>
<span style="color: #24292E">  </span><span style="color: #E36209">params</span><span style="color: #D73A49">?:</span><span style="color: #24292E"> </span><span style="color: #6F42C1">EditObj</span><span style="color: #24292E"> </span><span style="color: #6A737D">// Nuevos parámetros para editar una nota</span>
<span style="color: #24292E">}</span>
</code></pre>
				<p>El servidor recibirá las peticiones, las procesará, y enviará una respuesta con la forma:</p>
				<pre><code class="language-typescript"><span style="color: #D73A49">export</span><span style="color: #24292E"> </span><span style="color: #D73A49">type</span><span style="color: #24292E"> </span><span style="color: #6F42C1">ResponseType</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> {</span>
<span style="color: #24292E">  </span><span style="color: #E36209">success</span><span style="color: #D73A49">:</span><span style="color: #24292E"> </span><span style="color: #005CC5">boolean</span><span style="color: #24292E">, </span><span style="color: #6A737D">// Indica si la petición se ha procesado correctamente</span>
<span style="color: #24292E">  </span><span style="color: #E36209">output</span><span style="color: #D73A49">:</span><span style="color: #24292E"> </span><span style="color: #005CC5">any</span><span style="color: #24292E">, </span><span style="color: #6A737D">// Salida</span>
<span style="color: #24292E">};</span>
</code></pre>
				<a href="#cliente" id="cliente" style="color: inherit; text-decoration: none;">
					<h2><strong>Cliente</strong></h2>
				</a>
				<a href="#clase-notesmanagerclient" id="clase-notesmanagerclient" style="color: inherit; text-decoration: none;">
					<h3><strong>Clase NotesManagerClient</strong></h3>
				</a>
				<p>Desarrollaremos una clase que haga de <em>wrapper</em> de un socket. Se encargará de enviar peticiones al servidor y recibir sus respuestas.</p>
				<p>Tendrá como atributos:</p>
				<ul>
					<li><code>timer</code>: Un temporizador utilizado para medir el tiempo que tarda en responder el servidor.</li>
					<li><code>connection</code>: Objeto <code>EventEmitter</code> que representará, en este caso, el socket. Cumplir con el principio de inversión de dependencias nos permite testear más fácilmente nuestra clase, ya que podemos utilizar un EventEmitter como un server <em>falso</em> para producir artificalmente los eventos que esperamos.</li>
				</ul>
				<p>El constructor de nuestra clase recibe como argumento (opcional) los milisegundos que esperará por la respuesta de un servidor tras enviar una petición. Por defecto son 2000 milisegundos.</p>
				<p>Además, adjunta los siguientes handlers:</p>
				<ul>
					<li>Cuando el cliente emite un evento <code>requestSent</code> (se ha enviado una petición) se inicia el timer.</li>
					<li>Cuando el cliente emite un evento <code>response</code> (se ha recibido un arespuesta) se detiene el timer.</li>
					<li>Cuando el timer emite un evento <code>timeout</code> (se ha agotado el tiempo de espera) se emite un evento <code>timeout</code></li>
				</ul>
				<p>Y por último, conecta nuestro cliente una nueva instancia de <code>EventEmitter</code>. </p>
				<a href="#conectar-cliente" id="conectar-cliente" style="color: inherit; text-decoration: none;">
					<h4><strong>Conectar cliente</strong></h4>
				</a>
				<p>Para conectar nuestro cliente a un Socket debemos utilizar el método <code>connect</code>. Dicho método recibe como parámetro un <code>EventEmitter</code>, que será el nuevo endpoint del cliente sobre el que emplearemos el método <code>setHandlers</code>.</p>
				<p>El método <code>setHandlers</code> adjunta los siguientes handlers a los siguientes eventos sobre una conexión que se la pasa por parámetro:</p>
				<ul>
					<li>Cuando la conexión emita un evento <code>data</code>, se va guardando en un buffer, si el último caracter del buffer es un salto de línea se emite un evento <code>response</code> y se limpia el buffer.</li>
					<li>Cuando la conexión emita un evento <code>error</code>, el cliente emite un evento <code>error</code> junto un objeto <code>ConnectionError</code>.</li>
				</ul>
				<a href="#procesar-y-enviar-una-petición" id="procesar-y-enviar-una-petición" style="color: inherit; text-decoration: none;">
					<h4><strong>Procesar y enviar una petición</strong></h4>
				</a>
				<p>El método <code>processRequest</code> recibe como argumentos:</p>
				<ul>
					<li>Un objeto <code>RequestType</code>: La petición a enviar</li>
					<li><code>cb</code>: Callback que recibe un <em>chunk</em> de, como máximo 50 caracteres y un <code>EventEmitter</code>.</li>
					<li>opts: Un objeto del tipo <code>ProcessRequestOptions</code> que define las opciones para el método. Por defecto la opción <code>emitRequestSent</code> (indica si se debe emitir un evento <code>requestSent</code> tras enviar una petición) es verdadera.</li>
				</ul>
				<p>Se encarga de transformar la petición a una <code>string</code> en trozoa de, como máximo 50 caracteres, y aplicar el callback pasado por parámetro pasándole el trozo de string y la conexión del cliente.
				<strong><em>Nota: en nuestro caso, dicho callback se encargará de enviar cada trozo de dato a través del socket del cliente con <code>connection.write(chunk)</code></em></strong></p>
				<a href="#uso" id="uso" style="color: inherit; text-decoration: none;">
					<h3><strong>Uso</strong></h3>
				</a>
				<p>Partiremos del código utilizado en la aplicación principal del <a href="https://ull-esit-inf-dsi-2021.github.io/ull-esit-inf-dsi-20-21-prct08-filesystem-notes-app-miguel-martinr/"><strong>Gestor de Notas</strong></a> previamente desarrollado, ya que nuestro cliente se encargará de parsear las acciones por línea de comandos. Es decir, en caso de, por ejemplo, seleccionar un color no soportado, o introducir comandos no conocidos, la petición no se enviará sino que dicho error será capturado por el código cliente y se mostrará un mensaje informativo al usuario.</p>
				<ul>
					<li><strong>Color no soportado</strong></li>
				</ul>
				<p><img src="media/non-sup-color.gif" alt="Color no soportado demo">  </p>
				<p>Como podemos observar, en caso de detectar un error en el cliente, la petición no es enviada.</p>
				<p>También definiremos los handlers para los eventos <code>timeout</code> y <code>error</code> emitidos por el cliente:</p>
				<ul>
					<li>En caso de agotarse el tiempo de espera informaremos al usuario y terminaremos el proceso.  <pre><code class="language-typescript"><span style="color: #24292E">client.</span><span style="color: #6F42C1">on</span><span style="color: #24292E">(</span><span style="color: #032F62">&#039;timeout&#039;</span><span style="color: #24292E">, (</span><span style="color: #E36209">connection</span><span style="color: #D73A49">:</span><span style="color: #24292E"> </span><span style="color: #6F42C1">net</span><span style="color: #24292E">.</span><span style="color: #6F42C1">Socket</span><span style="color: #24292E">) </span><span style="color: #D73A49">=&gt;</span><span style="color: #24292E"> {</span>
<span style="color: #24292E">console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(</span><span style="color: #6F42C1">fail</span><span style="color: #24292E">(</span><span style="color: #032F62">`Timeout! Server took too long to respond`</span><span style="color: #24292E">));</span>
<span style="color: #24292E">process.</span><span style="color: #6F42C1">exit</span><span style="color: #24292E">(</span><span style="color: #D73A49">-</span><span style="color: #005CC5">1</span><span style="color: #24292E">);</span>
<span style="color: #24292E">});</span>
</code></pre>
					</li>
					<li>En caso de error imprimiremos el mensaje de error y terminaremos el proceso.  <pre><code class="language-typescript"><span style="color: #24292E">client.</span><span style="color: #6F42C1">on</span><span style="color: #24292E">(</span><span style="color: #032F62">&#039;error&#039;</span><span style="color: #24292E">, (</span><span style="color: #E36209">err</span><span style="color: #24292E">) </span><span style="color: #D73A49">=&gt;</span><span style="color: #24292E"> {</span>
<span style="color: #24292E">console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(err.</span><span style="color: #6F42C1">toString</span><span style="color: #24292E">());</span>
<span style="color: #24292E">process.</span><span style="color: #6F42C1">exit</span><span style="color: #24292E">(</span><span style="color: #D73A49">-</span><span style="color: #005CC5">1</span><span style="color: #24292E">);</span>
<span style="color: #24292E">});</span>
</code></pre>
					</li>
				</ul>
				<p>Una vez hemos parseado los comandos introducidos por el usuario, conectaremos con el servidor. Para ello, todos los comandos del cliente permiten especificar el puerto y host del servidor mediante las opciones <code>--port</code> y <code>--host</code> respectivamente. Donde <code>port</code> es un número entero y <code>host</code> es una string. Los valores por defecto son el puerto <code>5510</code> y el host <code>127.0.0.1</code>.</p>
				<ul>
					<li><p><strong>Conexión con el servidor</strong></p>
						<pre><code class="language-typescript"><span style="color: #24292E">client.</span><span style="color: #6F42C1">connect</span><span style="color: #24292E">(net.</span><span style="color: #6F42C1">connect</span><span style="color: #24292E">(argv.port, argv.host));  Conectamos con el servidor</span>
</code></pre>
					</li>
					<li><p><strong>Recibir respuesta del servidor</strong><br>A continuación, adjuntaremos un handler al evento <code>response</code> del cliente, dicho handler puede depender del tipo de respuesta que se espera, por ejemplo: En el caso del comando list se espera recibir un array de strings que contiene los títulos de las notas listadas, por lo que debemos verificar que la petición ha sido resuelta correctamente :</p>
					</li>
				</ul>
				<pre><code class="language-typescript"><span style="color: #24292E">  client.</span><span style="color: #6F42C1">on</span><span style="color: #24292E">(</span><span style="color: #032F62">&#039;response&#039;</span><span style="color: #24292E">, (</span><span style="color: #E36209">res</span><span style="color: #24292E">) </span><span style="color: #D73A49">=&gt;</span><span style="color: #24292E"> {</span>
<span style="color: #24292E">    </span><span style="color: #D73A49">if</span><span style="color: #24292E"> (res.success) {</span>
<span style="color: #24292E">      res.output.</span><span style="color: #6F42C1">forEach</span><span style="color: #24292E">((</span><span style="color: #E36209">noteTitle</span><span style="color: #D73A49">:</span><span style="color: #24292E"> </span><span style="color: #005CC5">string</span><span style="color: #24292E">) </span><span style="color: #D73A49">=&gt;</span><span style="color: #24292E"> </span><span style="color: #6F42C1">consollog</span><span style="color: #24292E">(noteTitle));</span>
<span style="color: #24292E">    } </span><span style="color: #D73A49">else</span><span style="color: #24292E"> {</span>
<span style="color: #24292E">      console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(res.output);</span>
<span style="color: #24292E">    }</span>
<span style="color: #24292E">  });</span>
</code></pre>
				<p>Mientras que para el resto de comandos basta con imprimir la salida por consola:  </p>
				<pre><code class="language-typescript"><span style="color: #24292E">  client.</span><span style="color: #6F42C1">on</span><span style="color: #24292E">(</span><span style="color: #032F62">&#039;response&#039;</span><span style="color: #24292E">, (</span><span style="color: #E36209">res</span><span style="color: #24292E">) </span><span style="color: #D73A49">=&gt;</span><span style="color: #24292E"> {</span>
<span style="color: #24292E">    console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(res.output);</span>
<span style="color: #24292E">  });</span>
</code></pre>
				<ul>
					<li><strong>Enviar petición</strong><br>Por último, emplearemos el método <code>processRequest</code> del cliente pasándole la petición formada con los parámetros introducidos por el usuario y un callback encargado de enviar la infomación a través del socket:  <pre><code class="language-typescript"><span style="color: #24292E">client.</span><span style="color: #6F42C1">processRequest</span><span style="color: #24292E">({</span>
<span style="color: #24292E">  type: </span><span style="color: #032F62">&#039;edit&#039;</span><span style="color: #24292E">,</span>
<span style="color: #24292E">  username: argv.username,</span>
<span style="color: #24292E">  title: argv.title,</span>
<span style="color: #24292E">  params: params,</span>
<span style="color: #24292E">}, (</span><span style="color: #E36209">chunk</span><span style="color: #D73A49">:</span><span style="color: #24292E"> </span><span style="color: #005CC5">string</span><span style="color: #24292E">, </span><span style="color: #E36209">connection</span><span style="color: #D73A49">:</span><span style="color: #24292E"> </span><span style="color: #6F42C1">net</span><span style="color: #24292E">.</span><span style="color: #6F42C1">Socket</span><span style="color: #24292E">) </span><span style="color: #D73A49">=&gt;</span><span style="color: #24292E"> connection.</span><span style="color: #6F42C1">write</span><span style="color: #24292E">(chunk));</span>
</code></pre>
					</li>
				</ul>
				<a href="#servidor" id="servidor" style="color: inherit; text-decoration: none;">
					<h2><strong>Servidor</strong></h2>
				</a>
				<p>Nuestro servidor funcionará de forma similar. Servirá de <em>wrapper</em> para un objeto <code>net.Server</code>.</p>
				<p>El constructor recibirá como argumentos:</p>
				<ul>
					<li><code>sendingMethod</code>: Callback que recibe un <em>chunk</em> (string) y una conexión (EventEmitter). Define el método utilizado para enviar los trozos de las respuestas.</li>
					<li><code>endingMethod</code>: Callback opcional que recibe como parámetro un <code>EventEmitter</code>. Define como debe el servidor terminar una conexión con un cliente.</li>
				</ul>
				<p>Además, incializará el gestor de notas (<code>NotesManager</code>) y también adjuntará un handler al evento <code>request</code>. Dicho handler se encargará de procesar la petición, eviarla a la conexión de donde ha venido la petición y, si está definido, invocar al <code>endingMethod</code> para cerrar la conexión con el cliente:  </p>
				<pre><code class="language-typescript"><span style="color: #24292E">  </span><span style="color: #005CC5">this</span><span style="color: #24292E">.notesManager </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #D73A49">new</span><span style="color: #24292E"> </span><span style="color: #6F42C1">NotesManager</span><span style="color: #24292E">();</span>
<span style="color: #24292E">  </span><span style="color: #6A737D">// Handles a &#039;request&#039; event for each connection</span>
<span style="color: #24292E">  </span><span style="color: #005CC5">this</span><span style="color: #24292E">.</span><span style="color: #6F42C1">on</span><span style="color: #24292E">(</span><span style="color: #032F62">&#039;request&#039;</span><span style="color: #24292E">, (</span><span style="color: #E36209">req</span><span style="color: #24292E">, </span><span style="color: #E36209">connection</span><span style="color: #24292E">) </span><span style="color: #D73A49">=&gt;</span><span style="color: #24292E"> {</span>
<span style="color: #24292E">    </span><span style="color: #D73A49">let</span><span style="color: #24292E"> response </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">this</span><span style="color: #24292E">.</span><span style="color: #6F42C1">processRequest</span><span style="color: #24292E">(req);</span>
<span style="color: #24292E">    </span><span style="color: #005CC5">this</span><span style="color: #24292E">.</span><span style="color: #6F42C1">sendResponse</span><span style="color: #24292E">(connection, response, req);</span>
<span style="color: #24292E">    </span><span style="color: #D73A49">if</span><span style="color: #24292E"> (</span><span style="color: #005CC5">this</span><span style="color: #24292E">.endingMethod) </span><span style="color: #005CC5">this</span><span style="color: #24292E">.</span><span style="color: #6F42C1">endingMethod</span><span style="color: #24292E">(connection);</span>
<span style="color: #24292E">  });</span>
</code></pre>
				<a href="#listen" id="listen" style="color: inherit; text-decoration: none;">
					<h3><strong>Listen</strong></h3>
				</a>
				<p>El método listen permite al servidor funcionar en un determinado endpoint. Recibe como parámetros:</p>
				<ul>
					<li><code>endPoint</code>: EventEmitter que representa el nuevo endpoint del servidor.</li>
					<li><code>endingProcess</code>: Callback opcional que recibe un EventEmitter. Define las acciones que debe realizar el antiguo endpoint antes de ser sustituido por el nuevo.</li>
					<li><code>startingProcess</code>: Callback opcional que recibe un EventEmitter. Define las acciones que debe realizar el nuevo endpoint para empezar a funcionar.</li>
				</ul>
				<p>Si se pasa un <code>endingProcess</code> se invoca pasándole el endpoint actual.
				Se actualiza el endpoint, se adjuntan los handlers a los eventos de dicho endpoint y por último, si se pasa un <code>startingProcess</code> se ejecuta pasándole como argumento el nuevo endpoint.</p>
				<pre><code class="language-typescript"><span style="color: #24292E">  </span><span style="color: #6F42C1">listen</span><span style="color: #24292E">(endPoint: EventEmitter, endingProcess</span><span style="color: #D73A49">?:</span><span style="color: #24292E"> (</span><span style="color: #E36209">oldEndpoint</span><span style="color: #D73A49">:</span><span style="color: #24292E"> </span><span style="color: #6F42C1">EventEmitter</span><span style="color: #24292E">) </span><span style="color: #D73A49">=&gt;</span><span style="color: #24292E"> </span><span style="color: #D73A49">void</span><span style="color: #24292E">, startingProcess</span><span style="color: #D73A49">?:</span><span style="color: #24292E"> (</span><span style="color: #E36209">server</span><span style="color: #D73A49">:</span><span style="color: #24292E"> </span><span style="color: #6F42C1">EventEmitter</span><span style="color: #24292E">) </span><span style="color: #D73A49">=&gt;</span><span style="color: #24292E"> </span><span style="color: #D73A49">void</span><span style="color: #24292E">) {</span>
<span style="color: #24292E">    </span><span style="color: #D73A49">if</span><span style="color: #24292E"> (endingProcess) </span><span style="color: #6F42C1">endingProcess</span><span style="color: #24292E">(</span><span style="color: #005CC5">this</span><span style="color: #24292E">.endpoint);</span>
<span style="color: #24292E">    </span><span style="color: #005CC5">this</span><span style="color: #24292E">.endpoint </span><span style="color: #D73A49">=</span><span style="color: #24292E"> endPoint;</span>
<span style="color: #24292E">    </span><span style="color: #005CC5">this</span><span style="color: #24292E">.</span><span style="color: #6F42C1">setEndpointHandlers</span><span style="color: #24292E">(</span><span style="color: #005CC5">this</span><span style="color: #24292E">.endpoint);</span>
<span style="color: #24292E">    </span><span style="color: #D73A49">if</span><span style="color: #24292E"> (startingProcess) </span><span style="color: #6F42C1">startingProcess</span><span style="color: #24292E">(</span><span style="color: #005CC5">this</span><span style="color: #24292E">.endpoint);</span>
<span style="color: #24292E">  }</span>
</code></pre>
				<a href="#handlers-del-endpoint-del-servidor" id="handlers-del-endpoint-del-servidor" style="color: inherit; text-decoration: none;">
					<h3><strong>Handlers del endpoint del servidor</strong></h3>
				</a>
				<p>El método <code>setEndpointHandlers</code> recibe un EventEmitter y le adjunta los siguientes handlers:</p>
				<ul>
					<li>Para el evento <code>error</code> el servidor emite un evento <code>serverError</code> junto a un objeto <code>ServerConnectionERror</code>.</li>
				</ul>
				<a href="#handlers-para-conexiones-con-el-cliente" id="handlers-para-conexiones-con-el-cliente" style="color: inherit; text-decoration: none;">
					<h3><strong>Handlers para conexiones con el cliente</strong></h3>
				</a>
				<p>El método <code>setConnectionHandlers</code> recibe un EventEmitter y le adjunta los siguientes handlers:</p>
				<ul>
					<li>Para el evento <code>error</code> el servidor emite un evento <code>connectionError</code> junto a un objeto <code>ConnectionError</code>.</li>
					<li>Para el evento <code>data</code> se guarda el trozo de dato en un buffer y cuando el último caracter es un salto de línea se emite un evento <code>request</code> junto a la request parseada y la conexión de la que provino:<pre><code class="language-typescript"><span style="color: #D73A49">let</span><span style="color: #24292E"> incomingRequest </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #032F62">&#039;&#039;</span><span style="color: #24292E">;</span>
<span style="color: #24292E">connection.</span><span style="color: #6F42C1">on</span><span style="color: #24292E">(</span><span style="color: #032F62">&#039;data&#039;</span><span style="color: #24292E">, (</span><span style="color: #E36209">chunk</span><span style="color: #24292E">) </span><span style="color: #D73A49">=&gt;</span><span style="color: #24292E"> {</span>
<span style="color: #24292E">  incomingRequest </span><span style="color: #D73A49">+=</span><span style="color: #24292E"> chunk;</span>
<span style="color: #24292E">  </span><span style="color: #D73A49">if</span><span style="color: #24292E"> (incomingRequest[incomingRequest.</span><span style="color: #005CC5">length</span><span style="color: #24292E"> </span><span style="color: #D73A49">-</span><span style="color: #24292E"> </span><span style="color: #005CC5">1</span><span style="color: #24292E">] </span><span style="color: #D73A49">===</span><span style="color: #24292E"> </span><span style="color: #032F62">&#039;</span><span style="color: #005CC5">\n</span><span style="color: #032F62">&#039;</span><span style="color: #24292E">) {</span>
<span style="color: #24292E">    </span><span style="color: #005CC5">this</span><span style="color: #24292E">.</span><span style="color: #6F42C1">emit</span><span style="color: #24292E">(</span><span style="color: #032F62">&#039;request&#039;</span><span style="color: #24292E">, </span><span style="color: #005CC5">JSON</span><span style="color: #24292E">.</span><span style="color: #005CC5">parse</span><span style="color: #24292E">(incomingRequest), connection);</span>
<span style="color: #24292E">    incomingRequest </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #032F62">&#039;&#039;</span><span style="color: #24292E">;</span>
<span style="color: #24292E">  }</span>
<span style="color: #24292E">});</span>
</code></pre>
					</li>
				</ul>
				<a href="#enviar-respuesta-a-un-cliente" id="enviar-respuesta-a-un-cliente" style="color: inherit; text-decoration: none;">
					<h3><strong>Enviar respuesta a un cliente</strong></h3>
				</a>
				<p>El método <code>sendResponse</code> recibe como argumentos una conexión (EventEmitter), una respuesta (ResponseType) y (opcionalmente) la petición a la que se está respondiendo.</p>
				<p>Se encarga de convertir la respuesta a una string, dividirla en trozos de 50 caracteres (como máximo) y aplicar (si está definido) el <code>sendingMethod</code> sobre cada trozo de respuesta. Además, emitirá un evento <code>responseSent</code> cuando se termine de enviar la respuesta:  </p>
				<pre><code class="language-typescript"><span style="color: #24292E">  </span><span style="color: #6F42C1">sendResponse</span><span style="color: #24292E">(connection: EventEmitter, res: ResponseType, req</span><span style="color: #D73A49">?:</span><span style="color: #24292E"> RequestType) {</span>
<span style="color: #24292E">    </span><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5">splittedRes</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">JSON</span><span style="color: #24292E">.</span><span style="color: #005CC5">stringify</span><span style="color: #24292E">(res).</span><span style="color: #6F42C1">split</span><span style="color: #24292E">(</span><span style="color: #032F62">&#039;&#039;</span><span style="color: #24292E">);</span>

<span style="color: #24292E">    </span><span style="color: #D73A49">while</span><span style="color: #24292E"> (splittedRes.</span><span style="color: #005CC5">length</span><span style="color: #24292E"> </span><span style="color: #D73A49">&gt;</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span><span style="color: #24292E">) {</span>
<span style="color: #24292E">      </span><span style="color: #D73A49">let</span><span style="color: #24292E"> chunk </span><span style="color: #D73A49">=</span><span style="color: #24292E"> splittedRes.</span><span style="color: #6F42C1">splice</span><span style="color: #24292E">(</span><span style="color: #005CC5">0</span><span style="color: #24292E">, </span><span style="color: #005CC5">51</span><span style="color: #24292E">).</span><span style="color: #6F42C1">join</span><span style="color: #24292E">(</span><span style="color: #032F62">&#039;&#039;</span><span style="color: #24292E">);</span>
<span style="color: #24292E">      chunk </span><span style="color: #D73A49">+=</span><span style="color: #24292E"> splittedRes.</span><span style="color: #005CC5">length</span><span style="color: #24292E"> </span><span style="color: #D73A49">===</span><span style="color: #24292E"> </span><span style="color: #005CC5">0</span><span style="color: #24292E"> </span><span style="color: #D73A49">?</span><span style="color: #24292E"> </span><span style="color: #032F62">&#039;</span><span style="color: #005CC5">\n</span><span style="color: #032F62">&#039;</span><span style="color: #24292E"> </span><span style="color: #D73A49">:</span><span style="color: #24292E"> </span><span style="color: #032F62">&#039;&#039;</span><span style="color: #24292E">;</span>
<span style="color: #24292E">      </span><span style="color: #005CC5">this</span><span style="color: #24292E">.</span><span style="color: #6F42C1">sendingMethod</span><span style="color: #24292E">(chunk, connection);</span>
<span style="color: #24292E">    }</span>

<span style="color: #24292E">    </span><span style="color: #005CC5">this</span><span style="color: #24292E">.</span><span style="color: #6F42C1">emit</span><span style="color: #24292E">(</span><span style="color: #032F62">&#039;responseSent&#039;</span><span style="color: #24292E">, res, req);</span>
<span style="color: #24292E">  }</span>
</code></pre>
				<a href="#procesar-una-petición" id="procesar-una-petición" style="color: inherit; text-decoration: none;">
					<h3><strong>Procesar una petición</strong></h3>
				</a>
				<p>El método <code>processRequest</code> recibe como parámetro la petición a procesar.</p>
				<p>Dentro de un bloque try-catch, mediante un switch case, se relizan las acciones indicadas en la petición: añadir, listar, leer, eliminar o editar una nota, en caso de que se ejecute correctamente la petición se guarda la salida en la respuesta, en caso de que se produzca un error se guarda el mensaje de error en la respuesta y se devuelve la misma.</p>
				<a href="#uso-1" id="uso-1" style="color: inherit; text-decoration: none;">
					<h3><strong>Uso</strong></h3>
				</a>
				<p>El puerto por defecto en el que funcionará nuestro server sera el <code>5510</code>, aunque puede especificarse por línea de comandos: <code>node dist/Server 5512</code>.</p>
				<p>Definiremos nuestro objeto de la clase <code>NotesManagerServer</code> pasándole como argumentos un <code>sendingMethod</code> que escribe un trozo de dato en un socket y un <code>endingMethod</code> que se encarga de cerrar la conexión con el cliente.  </p>
				<pre><code class="language-typescript"><span style="color: #24292E">  </span><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5">server</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #D73A49">new</span><span style="color: #24292E"> </span><span style="color: #6F42C1">NotesManagerServer</span><span style="color: #24292E">((</span><span style="color: #E36209">chunk</span><span style="color: #D73A49">:</span><span style="color: #24292E"> </span><span style="color: #005CC5">string</span><span style="color: #24292E">, </span><span style="color: #E36209">connection</span><span style="color: #D73A49">:</span><span style="color: #24292E"> </span><span style="color: #6F42C1">net</span><span style="color: #24292E">.</span><span style="color: #6F42C1">Socket</span><span style="color: #24292E">) </span><span style="color: #D73A49">=&gt;</span><span style="color: #24292E"> connection.</span><span style="color: #6F42C1">write</span><span style="color: #24292E">(chunk),</span>
<span style="color: #24292E">  (</span><span style="color: #E36209">connection</span><span style="color: #D73A49">:</span><span style="color: #24292E"> </span><span style="color: #6F42C1">net</span><span style="color: #24292E">.</span><span style="color: #6F42C1">Socket</span><span style="color: #24292E">) </span><span style="color: #D73A49">=&gt;</span><span style="color: #24292E"> connection.</span><span style="color: #6F42C1">end</span><span style="color: #24292E">());</span>
</code></pre>
				<p>Además, definiremos los handlers para los erroes (errores tanto del cliente como del servidor):  </p>
				<pre><code class="language-typescript"><span style="color: #24292E">  </span><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #6F42C1">errorHandler</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> (</span><span style="color: #E36209">err</span><span style="color: #D73A49">:</span><span style="color: #24292E"> </span><span style="color: #6F42C1">BasicError</span><span style="color: #24292E">) </span><span style="color: #D73A49">=&gt;</span><span style="color: #24292E"> {</span>
<span style="color: #24292E">    console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(err.</span><span style="color: #6F42C1">toString</span><span style="color: #24292E">());</span>
<span style="color: #24292E">    process.</span><span style="color: #6F42C1">exit</span><span style="color: #24292E">(</span><span style="color: #D73A49">-</span><span style="color: #005CC5">1</span><span style="color: #24292E">);</span>
<span style="color: #24292E">  };</span>
<span style="color: #24292E">  server.</span><span style="color: #6F42C1">on</span><span style="color: #24292E">(</span><span style="color: #032F62">&#039;serverError&#039;</span><span style="color: #24292E">, errorHandler);</span>
<span style="color: #24292E">  server.</span><span style="color: #6F42C1">on</span><span style="color: #24292E">(</span><span style="color: #032F62">&#039;connectionError&#039;</span><span style="color: #24292E">, errorHandler)</span>
</code></pre>
				<p>Y también un handler para cuando se ha enviado una respuesta (evento <code>requestSent</code>) que se encargue de imprimir por pantalla la petición y la respuesta:  </p>
				<pre><code class="language-typescript"><span style="color: #24292E">  server.</span><span style="color: #6F42C1">on</span><span style="color: #24292E">(</span><span style="color: #032F62">&#039;responseSent&#039;</span><span style="color: #24292E">, (</span><span style="color: #E36209">res</span><span style="color: #24292E">, </span><span style="color: #E36209">req</span><span style="color: #24292E">) </span><span style="color: #D73A49">=&gt;</span><span style="color: #24292E"> {</span>
<span style="color: #24292E">    console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(</span><span style="color: #6F42C1">warn</span><span style="color: #24292E">(</span><span style="color: #032F62">&#039;Transaction complete:</span><span style="color: #005CC5">\n</span><span style="color: #032F62">&#039;</span><span style="color: #24292E">) </span><span style="color: #D73A49">+</span>
<span style="color: #24292E">      chalk.</span><span style="color: #6F42C1">blue</span><span style="color: #24292E">(</span><span style="color: #032F62">&#039;</span><span style="color: #005CC5">\n</span><span style="color: #032F62">  Req:&#039;</span><span style="color: #24292E">) </span><span style="color: #D73A49">+</span><span style="color: #24292E"> </span><span style="color: #005CC5">JSON</span><span style="color: #24292E">.</span><span style="color: #005CC5">stringify</span><span style="color: #24292E">(req) </span><span style="color: #D73A49">+</span>
<span style="color: #24292E">      chalk.</span><span style="color: #6F42C1">green</span><span style="color: #24292E">(</span><span style="color: #032F62">&#039;</span><span style="color: #005CC5">\n</span><span style="color: #032F62">  Res:&#039;</span><span style="color: #24292E">) </span><span style="color: #D73A49">+</span><span style="color: #24292E"> </span><span style="color: #005CC5">JSON</span><span style="color: #24292E">.</span><span style="color: #005CC5">stringify</span><span style="color: #24292E">(res)</span>
<span style="color: #24292E">    );</span>
<span style="color: #24292E">  });</span>
</code></pre>
				<p>Para poner a funcionar nuestro servidor necesitamos un endpoint en el que escuchar, en nuestro caso será un objeto <code>net.Server</code>. Para crearlo pasaremos un handler al método <code>net.createServer</code> que se encargue de aplicar el método <code>NotesManagerServer.setConnectionHandlers</code> sobre la conexión que recibe el callback como argumento:  </p>
				<pre><code class="language-typescript"><span style="color: #24292E">  </span><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5">serverEndPoint</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> net.</span><span style="color: #6F42C1">createServer</span><span style="color: #24292E">((</span><span style="color: #E36209">connection</span><span style="color: #24292E">) </span><span style="color: #D73A49">=&gt;</span><span style="color: #24292E"> server.</span><span style="color: #6F42C1">setConnectionHandlers</span><span style="color: #24292E">(connection));</span>
</code></pre>
				<p>Una vez tenemos un endPoint configurado podemos invocar el método <code>NotesManagerServer.listen</code> pasándole como parámetros el endpoint recién creado, un <code>endingMethod</code> que se encargue de cerrar el viejo endpoint (si existía) y un <code>startingProcess</code> que se encargue de invocar el método <code>net.Server.listen</code> del endpoint sobre el puerto especificado:</p>
				<pre><code class="language-typescript"><span style="color: #24292E">  server.</span><span style="color: #6F42C1">listen</span><span style="color: #24292E">(serverEndPoint, (</span><span style="color: #E36209">oldEndpoint</span><span style="color: #D73A49">:</span><span style="color: #24292E"> </span><span style="color: #6F42C1">net</span><span style="color: #24292E">.</span><span style="color: #6F42C1">Server</span><span style="color: #24292E">) </span><span style="color: #D73A49">=&gt;</span><span style="color: #24292E"> oldEndpoint?.</span><span style="color: #6F42C1">close</span><span style="color: #24292E">(), (</span><span style="color: #E36209">endPoint</span><span style="color: #D73A49">:</span><span style="color: #24292E"> </span><span style="color: #6F42C1">net</span><span style="color: #24292E">.</span><span style="color: #6F42C1">Server</span><span style="color: #24292E">) </span><span style="color: #D73A49">=&gt;</span><span style="color: #24292E"> endPoint.</span><span style="color: #6F42C1">listen</span><span style="color: #24292E">(port, () </span><span style="color: #D73A49">=&gt;</span><span style="color: #24292E"> {</span>
<span style="color: #24292E">  console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(</span><span style="color: #6F42C1">warn</span><span style="color: #24292E">(</span><span style="color: #032F62">`NotesManager server is running on port ${</span><span style="color: #24292E">port</span><span style="color: #032F62">}`</span><span style="color: #24292E">));</span>
<span style="color: #24292E">  }));</span>
</code></pre>
				<p>Y nuestro servidor ya estaría listo para escuchar y responder peticiones:  </p>
				<p><img src="media/server-demo-2.gif" alt="Server Demo2"></p>
				<p>A continuación, un ejemplo de uso de la aplicación con un servidor y dos clientes, uno de los clientes alojado en la misma máquina que el servidor y otro en otra máquina de lam isma red local.</p>
				<ul>
					<li>La terminal izquierda es el cliente en la misma máquina que el servidor. En dicho cliente se listan las notas que el servidor tiene guardadas, por lo que se puede observar como se van añadiendo las notas que el otro cliente envía.</li>
					<li>La terminal de la derecha es el servidor</li>
					<li>La terminal de la esquina inferior derecha es un cliente en otra máquina de la misma red local. Desde dicho cliente se ejecuta un script que añade notas al servidor.</li>
				</ul>
				<p><img src="media/../media/demo-host.gif" alt="Server demo host"></p>
				<a href="#testing" id="testing" style="color: inherit; text-decoration: none;">
					<h2><strong>Testing</strong></h2>
				</a>
				<p>Gracias a que las clases diseñadas son <em>wrappers</em>, se facilita el proceso de hacer pruebas unitarias, ya que podemos hacer pasar un objeto <code>EventEmitter</code> por un servidor o un cliente indistintitamente.</p>
				<p>Por ejemplo, para testear si un cliente puede procesar correctamente la respuesta de un servidor simplemente debemos crear un <code>EventEmitter</code>, conectar un cliente a dicho <code>EventEmitter</code> y emitir eventos <code>data</code> con los trozos de información que llevan la respuesta:  </p>
				<pre><code class="language-typescript"><span style="color: #24292E">  </span><span style="color: #6F42C1">it</span><span style="color: #24292E">(</span><span style="color: #032F62">&#039;Should emit a response event once it gets a complete response&#039;</span><span style="color: #24292E">, (</span><span style="color: #E36209">done</span><span style="color: #24292E">) </span><span style="color: #D73A49">=&gt;</span><span style="color: #24292E"> {</span>
<span style="color: #24292E">    </span><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5">socket</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #D73A49">new</span><span style="color: #24292E"> </span><span style="color: #6F42C1">EventEmitter</span><span style="color: #24292E">();</span>
<span style="color: #24292E">    </span><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5">client</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #D73A49">new</span><span style="color: #24292E"> </span><span style="color: #6F42C1">NotesManagerClient</span><span style="color: #24292E">();</span>

<span style="color: #24292E">    client.</span><span style="color: #6F42C1">connect</span><span style="color: #24292E">(socket);</span>
<span style="color: #24292E">    client.</span><span style="color: #6F42C1">on</span><span style="color: #24292E">(</span><span style="color: #032F62">&#039;response&#039;</span><span style="color: #24292E">, (</span><span style="color: #E36209">res</span><span style="color: #24292E">) </span><span style="color: #D73A49">=&gt;</span><span style="color: #24292E"> {</span>
<span style="color: #24292E">      </span><span style="color: #6F42C1">expect</span><span style="color: #24292E">(res).to.be.</span><span style="color: #6F42C1">eql</span><span style="color: #24292E">({ </span><span style="color: #032F62">&#039;success&#039;</span><span style="color: #24292E">: </span><span style="color: #032F62">&#039;true&#039;</span><span style="color: #24292E">, </span><span style="color: #032F62">&#039;output&#039;</span><span style="color: #24292E">: </span><span style="color: #032F62">&#039;NoteOne&#039;</span><span style="color: #24292E">, </span><span style="color: #032F62">&#039;curr&#039;</span><span style="color: #24292E">: </span><span style="color: #005CC5">26</span><span style="color: #24292E"> });</span>
<span style="color: #24292E">      </span><span style="color: #6F42C1">done</span><span style="color: #24292E">();</span>
<span style="color: #24292E">    });</span>


<span style="color: #24292E">    socket.</span><span style="color: #6F42C1">emit</span><span style="color: #24292E">(</span><span style="color: #032F62">&#039;data&#039;</span><span style="color: #24292E">, </span><span style="color: #032F62">&#039;{&quot;success&quot;: &quot;true&quot;, &quot;output&quot;: &quot;NoteOne&quot;&#039;</span><span style="color: #24292E">);</span>
<span style="color: #24292E">    socket.</span><span style="color: #6F42C1">emit</span><span style="color: #24292E">(</span><span style="color: #032F62">&#039;data&#039;</span><span style="color: #24292E">, </span><span style="color: #032F62">&#039;, &quot;curr&quot;: 26}&#039;</span><span style="color: #24292E">);</span>
<span style="color: #24292E">    socket.</span><span style="color: #6F42C1">emit</span><span style="color: #24292E">(</span><span style="color: #032F62">&#039;data&#039;</span><span style="color: #24292E">, </span><span style="color: #032F62">&#039;</span><span style="color: #005CC5">\n</span><span style="color: #032F62">&#039;</span><span style="color: #24292E">);</span>
<span style="color: #24292E">  });</span>
</code></pre>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class=" ">
						<a href="modules.html">Exports</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/client.html">Client</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/client_notesmanagerclient.html">Client/<wbr>Notes<wbr>Manager<wbr>Client</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/client_timer.html">Client/<wbr>Timer</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/errors.html">Errors</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/errors_basic_error.html">Errors/basic_<wbr>error</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/errors_connection_error.html">Errors/connection_<wbr>error</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/errors_server_connection_error.html">Errors/server_<wbr>connection_<wbr>error</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/notesmanager_errors.html">Notes<wbr>Manager/<wbr>Errors</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/notesmanager_errors_basic_error.html">Notes<wbr>Manager/<wbr>Errors/basic_<wbr>error</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/notesmanager_errors_invalid_color.html">Notes<wbr>Manager/<wbr>Errors/invalid_<wbr>color</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/notesmanager_errors_invalid_note.html">Notes<wbr>Manager/<wbr>Errors/invalid_<wbr>note</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/notesmanager_errors_invalid_username.html">Notes<wbr>Manager/<wbr>Errors/invalid_<wbr>username</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/notesmanager_errors_no_edition.html">Notes<wbr>Manager/<wbr>Errors/no_<wbr>edition</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/notesmanager_errors_repeated_note.html">Notes<wbr>Manager/<wbr>Errors/repeated_<wbr>note</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/notesmanager_interfaces_colored.html">Notes<wbr>Manager/<wbr>Interfaces/colored</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/notesmanager_interfaces_edit_obj.html">Notes<wbr>Manager/<wbr>Interfaces/edit-<wbr>obj</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/notesmanager_note.html">Notes<wbr>Manager/note</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/notesmanager_notes_manager.html">Notes<wbr>Manager/notes_<wbr>manager</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/server.html">Server</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/server_notesmanagerserver.html">Server/<wbr>Notes<wbr>Manager<wbr>Server</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/helpers.html">helpers</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/index.html">index</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>